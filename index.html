<!DOCTYPE html>
<html>
<head>
<title>Inventory Management</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f4f4f9;
    display: flex;
    flex-direction: column;
    align-items: center; /* centers items horizontally */
    justify-content: center; /* centers items vertically */
    min-height: 100vh;
    margin: 0;
  }

  h2 {
    text-align: center;
  }

  form {
    display: flex;
    flex-wrap: wrap;
    justify-content: center; /* âœ… centers form inputs horizontally */
    gap: 10px;
    margin-bottom: 20px;
  }

  input, button {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

  button {
    background-color: #4CAF50;
    color: white;
    cursor: pointer;
  }

  button:hover {
    background-color: #45a049;
  }

  table {
    border-collapse: collapse;
    width: 80%;
    background: white;
  }

  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
  }

  th {
    background-color: #f2f2f2;
  }
</style>
</head>
<body>
<h2>Inventory Management </h2>

<form id="form">
  <input type="hidden" id="editId">
  <input id="name" placeholder="Product Name" required>
  <input id="sku" placeholder="SKU" required>
  <input id="cat" placeholder="Category">
  <input id="qty" type="number" placeholder="Quantity">
  <input id="price" type="number" placeholder="Price">
  <button type="submit">Add</button>
</form>

<table border="1" cellpadding="5">
<thead>
<tr>
  <th>Name</th><th>SKU</th><th>Category</th><th>Qty</th><th>Price</th><th>Action</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>

<script>
const SUPABASE_URL = "https://tfpowgmvdqfugutxwuii.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmcG93Z212ZHFmdWd1dHh3dWlpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3MTc1NDcsImV4cCI6MjA3NzI5MzU0N30.E0-UdjrKT23uiBMGZ5C6fmFeX_bRGjOYZ7ZgpjdiBNY";

const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
const f = document.getElementById("form"), list = document.getElementById("list");

async function loadData() {
  const { data, error } = await supabase.from('inventory').select('*').order('id', { ascending: true });
  if (error) return console.error(error);
  list.innerHTML = data.map(i => `
    <tr>
      <td>${i.name}</td><td>${i.sku}</td><td>${i.category||''}</td>
      <td>${i.quantity||0}</td><td>${i.price||0}</td>
      <td>
        <button onclick="edit(${i.id}, '${i.name}', '${i.sku}', '${i.category||''}', ${i.quantity||0}, ${i.price||0})">Edit</button>
        <button onclick="del(${i.id})">Delete</button>
      </td>
    </tr>`).join('');
}

f.onsubmit = async e => {
  e.preventDefault();
  const name = f.name.value, sku = f.sku.value, category = f.cat.value;
  const quantity = parseInt(f.qty.value)||0, price = parseFloat(f.price.value)||0;

  if (!name || !sku) return alert("Enter Product Name and SKU");

  if (f.editId.value) {
    const { error } = await supabase.from('inventory')
      .update({ name, sku, category, quantity, price })
      .eq('id', f.editId.value);
    if (error) return alert(error.message);
    f.editId.value = '';
    f.querySelector("button").textContent = "Add";
  } else {
    const { error } = await supabase.from('inventory')
      .insert([{ name, sku, category, quantity, price }]);
    if (error) return alert(error.message);
  }
  f.reset();
  loadData();
};

function edit(id, name, sku, category, quantity, price) {
  f.name.value = name; f.sku.value = sku; f.cat.value = category;
  f.qty.value = quantity; f.price.value = price;
  f.editId.value = id; f.querySelector("button").textContent = "Update";
}

async function del(id) {
  const { error } = await supabase.from('inventory').delete().eq('id', id);
  if (error) return alert(error.message);
  loadData();
}

loadData();
</script>
</body>
</html>
